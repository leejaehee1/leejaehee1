ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ë„ **Serverless**ë¡œ ì¶©ë¶„íˆ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
API Gateway + Lambda + DynamoDB + S3 ì¡°í•©ìœ¼ë¡œ â€œê°„ë‹¨í•œ ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤â€ë¥¼ êµ¬í˜„í•˜ëŠ” ì˜ˆì œë¥¼ ì•Œë ¤ë“œë¦´ê²Œìš”.

---

# ğŸ“ Serverless ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ ì˜ˆì œ

## ğŸ“Œ ì•„í‚¤í…ì²˜ ê°œìš”

* **API Gateway**: REST API ì—”ë“œí¬ì¸íŠ¸ (ê²Œì‹œê¸€ CRUD ìš”ì²­ ì²˜ë¦¬)
* **Lambda**: ê²Œì‹œê¸€ ì‘ì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ ë¡œì§ ì‹¤í–‰
* **DynamoDB**: ê²Œì‹œê¸€ ë©”íƒ€ë°ì´í„° ì €ì¥ (ì œëª©, ë‚´ìš©, ì‘ì„±ì, ë‚ ì§œ ë“±)
* **S3**: ì´ë¯¸ì§€/ì²¨ë¶€ íŒŒì¼ ì €ì¥ì†Œ
* **CloudFront**(ì„ íƒ): ì •ì  í˜ì´ì§€(ë¦¬ì•¡íŠ¸ í”„ë¡ íŠ¸ì—”ë“œ) ë°°í¬

---

## ğŸ“‚ DynamoDB í…Œì´ë¸” ì˜ˆì‹œ

```json
{
  "TableName": "BlogPosts",
  "KeySchema": [
    { "AttributeName": "postId", "KeyType": "HASH" }
  ],
  "AttributeDefinitions": [
    { "AttributeName": "postId", "AttributeType": "S" }
  ],
  "ProvisionedThroughput": {
    "ReadCapacityUnits": 5,
    "WriteCapacityUnits": 5
  }
}
```

---

## âš¡ Lambda í•¨ìˆ˜ ì˜ˆì œ (Node.js)

### 1. ê²Œì‹œê¸€ ì‘ì„± (Create)

```js
const { v4: uuidv4 } = require("uuid");
const AWS = require("aws-sdk");
const dynamoDb = new AWS.DynamoDB.DocumentClient();

exports.handler = async (event) => {
  const data = JSON.parse(event.body);
  const postId = uuidv4();

  const params = {
    TableName: "BlogPosts",
    Item: {
      postId,
      title: data.title,
      content: data.content,
      author: data.author,
      createdAt: new Date().toISOString()
    },
  };

  await dynamoDb.put(params).promise();

  return {
    statusCode: 201,
    body: JSON.stringify({ message: "Post created", postId }),
  };
};
```

---

### 2. ê²Œì‹œê¸€ ì¡°íšŒ (Read)

```js
exports.handler = async (event) => {
  const postId = event.pathParameters.id;

  const params = {
    TableName: "BlogPosts",
    Key: { postId },
  };

  const result = await dynamoDb.get(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify(result.Item),
  };
};
```

---

### 3. ê²Œì‹œê¸€ ëª©ë¡ (List)

```js
exports.handler = async () => {
  const params = {
    TableName: "BlogPosts",
    Limit: 20, // í˜ì´ì§€ë„¤ì´ì…˜
  };

  const result = await dynamoDb.scan(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify(result.Items),
  };
};
```

---

### 4. ê²Œì‹œê¸€ ìˆ˜ì • (Update)

```js
exports.handler = async (event) => {
  const postId = event.pathParameters.id;
  const data = JSON.parse(event.body);

  const params = {
    TableName: "BlogPosts",
    Key: { postId },
    UpdateExpression: "set title = :t, content = :c",
    ExpressionAttributeValues: {
      ":t": data.title,
      ":c": data.content,
    },
    ReturnValues: "UPDATED_NEW",
  };

  const result = await dynamoDb.update(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify(result.Attributes),
  };
};
```

---

### 5. ê²Œì‹œê¸€ ì‚­ì œ (Delete)

```js
exports.handler = async (event) => {
  const postId = event.pathParameters.id;

  const params = {
    TableName: "BlogPosts",
    Key: { postId },
  };

  await dynamoDb.delete(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify({ message: "Post deleted" }),
  };
};
```

---

## ğŸš€ Serverless Framework ì„¤ì • (serverless.yml)

```yaml
service: blog-service

provider:
  name: aws
  runtime: nodejs18.x
  region: ap-northeast-2

functions:
  createPost:
    handler: create.handler
    events:
      - http:
          path: posts
          method: post
  getPost:
    handler: get.handler
    events:
      - http:
          path: posts/{id}
          method: get
  listPosts:
    handler: list.handler
    events:
      - http:
          path: posts
          method: get
  updatePost:
    handler: update.handler
    events:
      - http:
          path: posts/{id}
          method: put
  deletePost:
    handler: delete.handler
    events:
      - http:
          path: posts/{id}
          method: delete

resources:
  Resources:
    BlogPostsTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: BlogPosts
        AttributeDefinitions:
          - AttributeName: postId
            AttributeType: S
        KeySchema:
          - AttributeName: postId
            KeyType: HASH
        BillingMode: PAY_PER_REQUEST
```

---

## ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™

* **React/Next.js** ì •ì  ë¸”ë¡œê·¸ UI ì‘ì„±
* **Axios / fetch** ë¡œ API Gateway í˜¸ì¶œ
* **S3/CloudFront**ë¡œ ì •ì  í˜ì´ì§€ í˜¸ìŠ¤íŒ…

ê·¸ëŸ¼ **í…ìŠ¤íŠ¸ ê¸°ë°˜ ë¸”ë¡œê·¸ API**ë§Œ ë‹¤ë£¨ëŠ” **Serverless ì˜ˆì œ**ë¥¼ ì •ë¦¬í•´ë“œë¦´ê²Œìš”.

---

# ğŸ“ í…ìŠ¤íŠ¸ ê¸°ë°˜ ë¸”ë¡œê·¸ API (Serverless)

## ğŸ“Œ ì•„í‚¤í…ì²˜

* **API Gateway** â†’ REST ì—”ë“œí¬ì¸íŠ¸ ì œê³µ
* **Lambda (Node.js)** â†’ ê²Œì‹œê¸€ CRUD ì²˜ë¦¬
* **DynamoDB** â†’ ê²Œì‹œê¸€ ì €ì¥ì†Œ (ì œëª©, ë³¸ë¬¸, ì‘ì„±ì, ìƒì„±ì¼ ë“±)

ğŸ‘‰ S3, CloudFront ê°™ì€ íŒŒì¼ ìŠ¤í† ë¦¬ì§€ëŠ” ìƒëµí•˜ê³  **í…ìŠ¤íŠ¸ ë°ì´í„°ë§Œ** ë‹¤ë£¹ë‹ˆë‹¤.

---

## ğŸ“‚ DynamoDB í…Œì´ë¸” êµ¬ì¡°

* í…Œì´ë¸”ëª…: `BlogPosts`
* íŒŒí‹°ì…˜ í‚¤: `postId (String)`

ì˜ˆì‹œ ë°ì´í„°:

```json
{
  "postId": "1234-5678",
  "title": "ì²« ë²ˆì§¸ ê¸€",
  "content": "ì•ˆë…•í•˜ì„¸ìš”! ì„œë²„ë¦¬ìŠ¤ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.",
  "author": "jaehee",
  "createdAt": "2025-08-25T12:00:00Z"
}
```

---

## âš¡ Lambda í•¨ìˆ˜ ì˜ˆì œ

### 1. ê²Œì‹œê¸€ ì‘ì„± (Create)

```js
const { v4: uuidv4 } = require("uuid");
const AWS = require("aws-sdk");
const dynamoDb = new AWS.DynamoDB.DocumentClient();

exports.handler = async (event) => {
  const data = JSON.parse(event.body);
  const postId = uuidv4();

  const params = {
    TableName: "BlogPosts",
    Item: {
      postId,
      title: data.title,
      content: data.content,
      author: data.author,
      createdAt: new Date().toISOString(),
    },
  };

  await dynamoDb.put(params).promise();

  return {
    statusCode: 201,
    body: JSON.stringify({ message: "Post created", postId }),
  };
};
```

---

### 2. ê²Œì‹œê¸€ ì¡°íšŒ (Read)

```js
exports.handler = async (event) => {
  const postId = event.pathParameters.id;

  const params = {
    TableName: "BlogPosts",
    Key: { postId },
  };

  const result = await dynamoDb.get(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify(result.Item || {}),
  };
};
```

---

### 3. ê²Œì‹œê¸€ ëª©ë¡ (List)

```js
exports.handler = async () => {
  const params = { TableName: "BlogPosts" };
  const result = await dynamoDb.scan(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify(result.Items),
  };
};
```

---

### 4. ê²Œì‹œê¸€ ìˆ˜ì • (Update)

```js
exports.handler = async (event) => {
  const postId = event.pathParameters.id;
  const data = JSON.parse(event.body);

  const params = {
    TableName: "BlogPosts",
    Key: { postId },
    UpdateExpression: "set title = :t, content = :c",
    ExpressionAttributeValues: {
      ":t": data.title,
      ":c": data.content,
    },
    ReturnValues: "UPDATED_NEW",
  };

  const result = await dynamoDb.update(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify(result.Attributes),
  };
};
```

---

### 5. ê²Œì‹œê¸€ ì‚­ì œ (Delete)

```js
exports.handler = async (event) => {
  const postId = event.pathParameters.id;

  const params = {
    TableName: "BlogPosts",
    Key: { postId },
  };

  await dynamoDb.delete(params).promise();

  return {
    statusCode: 200,
    body: JSON.stringify({ message: "Post deleted" }),
  };
};
```

---

## ğŸš€ serverless.yml ì„¤ì •

```yaml
service: text-blog-service

provider:
  name: aws
  runtime: nodejs18.x
  region: ap-northeast-2

functions:
  createPost:
    handler: create.handler
    events:
      - http:
          path: posts
          method: post
  getPost:
    handler: get.handler
    events:
      - http:
          path: posts/{id}
          method: get
  listPosts:
    handler: list.handler
    events:
      - http:
          path: posts
          method: get
  updatePost:
    handler: update.handler
    events:
      - http:
          path: posts/{id}
          method: put
  deletePost:
    handler: delete.handler
    events:
      - http:
          path: posts/{id}
          method: delete

resources:
  Resources:
    BlogPostsTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: BlogPosts
        AttributeDefinitions:
          - AttributeName: postId
            AttributeType: S
        KeySchema:
          - AttributeName: postId
            KeyType: HASH
        BillingMode: PAY_PER_REQUEST
```

---

âœ… ì´ë ‡ê²Œ í•˜ë©´ **ì™„ì „í•œ ì„œë²„ë¦¬ìŠ¤ ë¸”ë¡œê·¸ API**ê°€ ë™ì‘í•©ë‹ˆë‹¤.
(ê¸€ì“°ê¸°/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ ëª¨ë‘ ì§€ì›)
